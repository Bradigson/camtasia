(window.webpackJsonpmusescore=window.webpackJsonpmusescore||[]).push([[73],{"+snL":function(t,e,n){"use strict";n.r(e);var o=n("ducO"),i=window.$;function s(t,e,n){e.length&&768<=window.innerWidth?t.addClass("left"):n.length&&960<=window.innerWidth&&t.addClass("right")}function r(t){t.removeClass("left"),t.removeClass("right")}function a(t,e){var n=new Date;o.a.set("ms-refferer",t),o.a.set("ms-refferer-expires",n.getTime()+e)}function c(t){var e=new Date;o.a.set("ms-hats-expires",e.getTime()+t)}var d={init:function(){this.initBetaSurveyHats(),this.initHats()},initBetaSurveyHats:function(){var t=i(".js-beta-survey-hats");console.log("initBetaSurveyHats");var e=i(".aside-col-first"),n=i(".score-right");o.a.get("beta-survey-signed")||(s(t,e,n),console.log("showHats",t)),i(".js-hats-close",t).on("click",function(){o.a.set("beta-survey-signed",1),r(t)}),i(".js-beta-survey-hats-link",t).on("click",function(){o.a.set("beta-survey-signed",1)})},initHats:function(){var t,e,n,d,u=i(".js-hats"),l=i(".aside-col-first"),f=i(".score-right"),h=(i("#sliding-popup"),document.referrer);n=new Date,d=+o.a.get("ms-refferer-expires"),n.getTime()>d&&(""===h?a("direct",864e5):-1===h.indexOf("musescore.com")&&a("other",864e5)),(function(){var t=new Date,e=+o.a.get("ms-hats-expires");return t.getTime()>e}()&&""===h||!!+o.a.get("need-hats"))&&(90<(t=1,e=100,Math.random()*(e-t)+t)||+o.a.get("need-hats")?(o.a.set("need-hats",1),s(u,l,f)):c(864e5)),i(".js-musescore-feedback-form-submit").on("click",function(){c(2592e6),r(u),o.a.set("need-hats",0)}),i(".js-hats-close",u).on("click",function(){c(2592e6),r(u),o.a.set("need-hats",0)})}};i(function(){d.init()})},"0zak":function(t,e,n){"use strict";n.r(e);var o=n("BtPH"),i=n("cM9g"),s=n("wecF"),r=n("fiay"),a=window.$,c={init:function(){var t=this,e=a(".js-score-comments");this.spinner=new s.a,this.editorEnabled=!1,this.newComment=null,this.appendFormTo(a(".js-score-comment-form-container"),{},function(n){var o=n.html,i=n.comment;e.prepend(o),t.jumpToComment(i.id)}),a(window).on("load hashchange",function(){t.commentAnnotate()}),e.on("click",".annotation-highlight",function(e){var n=a(e.target).closest(".annotation-highlight");return t.highlightAnnotate(n),!1}).on("click",".js-comment-delete",function(n){if(confirm("Are you sure to delete your comment?")){var o=a(n.target),i=t.findComment(o),s=t.getCommentId(i),r=e.find('[data-comment-parent-id="'+s+'"]'),c=o.attr("href");t.sendCommentAction(c,function(){0<r.length?t.getCommentContent(i).empty():i.slideUp(function(){i.remove()}),t.closeDropdown(o)})}return!1}).on("click",".js-comment-spam",function(e){var n=a(e.target).attr("href");return t.sendCommentAction(n),!1}).on("click",".js-comment-edit",function(e){var n=a(e.target),o=t.findComment(n);return t.commentEdit(o),t.closeDropdown(n),!1}).on("click",".js-comment-reply",function(e){var n=a(e.target),o=t.findComment(n);return t.commentReply(o),t.closeDropdown(n),!1})},closeDropdown:function(t){this.findDropdown(this.findComment(t)).removeClass("open")},findComment:function(t){return t.closest(".js-comment")},findCommentWrapper:function(t){return t.closest(".js-comment-wrapper")},findDropdown:function(t){return t.find("div.dropdown")},getCommentId:function(t){return t.attr("data-comment-id")},jumpToComment:function(t){document.location.hash="#comment-"+t},commentAnnotate:function(){var t=0;if(0<a("#navbar-administration").length&&(t+=parseInt(a("#navbar-bar").outerHeight(!0)+a("#navbar-tray").outerHeight(!0))),window.location.hash){var e=window.location.hash;if("-reply"===e.substr(e.length-6)){var n=(e=e.substring(0,e.length-6)).replace("#comment-","").replace("-reply","");a(".js-ajax-comments-id-"+n+" .js-ajax-comments-reply").click()}if("#comment-"===e.substr(0,9)){var o=a(e).next(".comment");this.highlightComment(o)}var i=a(e);if(i.length){var s=i.offset().top;a(window).scrollTop(parseInt(s,10)-t)}}else{var r=window.location.pathname.split("/");if("comment"===r[1]&&this.isNumeric(r[2])){var c=a("#comment-"+r[2]).next(".comment");this.highlightComment(c),setTimeout(function(){var e=a("#comment-"+r[2]).offset().top;a(window).scrollTop(parseInt(e,10)-t)},10)}}},highlightComment:function(t){a(".comment.highlight").removeClass("highlight"),t.addClass("highlight"),a(".read-more",t).hide(),a(".details",t).show();var e=setInterval(function(){if(window.jsmuseInstanceReady){window.jsmuseInstance.disableComments();var n=a(".annotation-highlight",t).data("annotation-id");n&&window.jsmuseInstance.highlightComment(n),clearInterval(e)}},10)},isNumeric:function(t){return+parseFloat(t)===t},enableEditor:function(){window.jsmuseInstance.enableCommentEditor(),this.editorEnabled=!0},disableEditor:function(){window.jsmuseInstance.disableCommentEditor(),this.editorEnabled=!1},toggleEditor:function(t){window.jsmuseInstanceReady&&(t.toggleClass("active"),this.editorEnabled?this.disableEditor():this.enableEditor())},saveComment:function(t,e){var n=this;void 0===e&&(e=function(){});var o=a(".button",t);if(o.attr("disabled",!0),window.jsmuseInstanceReady){this.spinner.show();var i=window.jsmuseInstance.getCommentEditor();i&&(a(".annotate-axis-x",t).val(i.x),a(".annotate-axis-y",t).val(i.y),a(".annotate-width",t).val(i.width),a(".annotate-height",t).val(i.height),a(".annotate-page",t).val(i.page),this.newComment=i),this.disableEditor();var s=t.parents(".comment-wrapper").find(".annotation-highlight").data("annotation-id");s&&this.newComment&&window.jsmuseInstance.removeComment(s),this.sendForm(t,function(t){e(t),n.spinner.hide(),o.attr("disabled",!1)})}},highlightAnnotate:function(t){if(window.jsmuseInstanceReady){var e=t.parents(".comment"),n=t.data("annotation-id");jsmuseInstance.highlightComment(n),a(".comment.highlight").removeClass("highlight"),e.addClass("highlight"),a(".read-more",e).hide(),a(".details",e).show()}},sendForm:function(t,e){void 0===e&&(e=function(){});var n=new window.FormData(t[0]);o.a.post({url:t.attr("action"),payload:n}).then(e).catch(function(t){i.a.error(t)})},sendCommentAction:function(t,e){var n=this;void 0===e&&(e=function(){}),this.spinner.show(),o.a.get({url:t}).then(function(t){e(t),n.spinner.hide()}).catch(function(t){n.spinner.hide(),i.a.error(t)})},commentReply:function(t){var e=this,n=a(".comment-content",t),o=this.appendFormTo(n,{parent_id:this.getCommentId(t)},function(n){var i=n.html,s=n.comment;e.findCommentWrapper(t).after(i),o.remove(),e.jumpToComment(s.id)});this.findFormTextarea(o).focus(),o.attr("action",Object(r.s)()),this.showCancelButton(o)},commentEdit:function(t){var e=a(".comment-content",t),n=a(".js-comment-source",t).text(),o=this.appendFormTo(e,{body:n},function(e){var n=e.html;t.replaceWith(n)});this.findFormTextarea(o).focus(),this.getCommentContent(t).hide(),o.attr("action",Object(r.t)({comment_id:this.getCommentId(t)})),this.showCancelButton(o)},getCommentContent:function(t){return a(".comment-content",t).find(".content")},appendFormTo:function(t,e,n){var o=this;void 0===e&&(e={}),void 0===n&&(n=function(){});var i=a(a("#js-score-comment-form-tpl").html()),s=this.findFormTextarea(i),r=i.find(".form-actions"),c=i.find(".js-form-cancel"),d=i.find(".score-annotate-toggle");return["score_id","parent_id","annotation_width","annotation_height","annotation_page","annotation_axis_y","annotation_axis_x","body"].forEach(function(t){e[t]&&a(".js-score-comment-form-input--"+t,i).val(e[t])}),s.val()?r.show(0):r.hide(),s.on("input",function(){s.val()?r.show(0):r.hide()}),d.one("commentEditor").click(function(t){t.preventDefault(),o.toggleEditor(d)}),c.on("click",function(){return o.cancelForm(i),!1}),i.on("submit",function(){return o.saveComment(i,n),s.val(""),!1}),i.appendTo(t),i},findFormTextarea:function(t){return t.find("textarea")},cancelForm:function(t){if(!t.hasClass("hidden")){var e=this.findComment(t),n=t.closest(".js-score-comment-form");this.deleteForm(n),this.getCommentContent(e).show()}},deleteForm:function(t){t.slideUp(150,function(){t.remove()})},showCancelButton:function(t){a(".js-form-cancel",t).removeClass("hidden")}};a(function(){c.init()})},"3EUR":function(t,e,n){"use strict";n.r(e);var o=n("5G3V"),i=window.$,s="__score_sidebar_width",r={init:function(t){var e=t.$container;this.$container=e,this.min=570,this.max=3600,this.mainmin=380,this.$sidebar.width()>this.buttonWidth?this.setButtonsDisplay("horizontal"):this.setButtonsDisplay("vertical"),o.a.get(s)&&this.resizeSidebar(o.a.get(s),!1),this.addEventListeners()},addEventListeners:function(){var t=this;i(".score-split").on("touchstart mousedown",function(e){e.preventDefault(),i(document).mousemove(function(e){e.preventDefault();var n=e.pageX;t.resizeSidebar(n,!0)})}),i(document).mouseup(function(){i(document).unbind("touchstart mousemove")})},resizeSidebar:function(t,e){t>this.min&&t<this.max&&t<i(window).width()-this.mainmin&&(this.$sidebar.css("width","calc(100% - "+t+"px)"),this.$content.css("width",t),e&&i(window).trigger("resize"),o.a.set(s,t),this.$sidebar.width()>=this.buttonWidth?this.setButtonsDisplay("horizontal"):this.setButtonsDisplay("vertical"))},setButtonsDisplay:function(t){this.$container.find(".buttons-wrapper").removeClass("vertical").removeClass("horizontal").addClass(t)},get $sidebar(){return this.$container.find(".score-right")},get $content(){return this.$container.find(".score-left")},get buttonWidth(){var t=0;return i(".button-wrapper .button").each(function(){t+=i(this).outerWidth()+10}),t}};e.default=r},"6QJ2":function(t,e,n){"use strict";n.r(e);var o=n("Ek63"),i=n("tDDK"),s={init:function(t){var e=t.abVariation,n=t.$container;this.$container=n,this.$items=this.$container.find(".js-score-hub-menu-item"),"2018_05_23_SCORE_MENU.B"===e&&this.$items.on("click",function(){Object(i.d)(o.t)})}};e.default=s},AQ33:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var o=n("gnNu"),i=n("uXdi"),s=n("wecF"),r=window.$,a=function(){function t(){}var e=t.prototype;return e.init=function(){this.spinner=new s.a,this.addEventListeners()},e.addEventListeners=function(){r(document).on("click",".js-score-modal-remote",this.onModalRemote.bind(this)).on("click",".js-score-btn-list-toggle",this.onListToggle.bind(this)).on("click",".js-score-spotlight-toggle",this.onSpotlightToggle.bind(this)).on("keyup",".js-score-list-search",this.onListSearch.bind(this)).on("click",".js-score-revision-modal",this.onRevisionClick.bind(this))},e.onListToggle=function(t){t.preventDefault();var e="js-score-list-has-added",n=r(t.target),s=n.hasClass(e),a=n.attr("data-score"),c=n.attr("data-id"),d=o.a.getToken();"group"===n.attr("data-type")?i.a.toggleGroups({isAddedToList:s,scoreId:a,listId:c,csrfToken:d,success:function(){}}):i.a.toggleSets({isAddedToList:s,scoreId:a,listId:c,csrfToken:d,success:function(){}}),n.hasClass(e)?(n.removeClass(e),n.addClass("button no-margin "),n.text("Add")):(n.addClass(e),n.removeClass("button no-margin "),n.text("Remove"))},e.onSpotlightToggle=function(t){t.preventDefault();var e=r(t.target),n=parseInt(e.attr("data-spotlight"),10),s=e.attr("data-score"),a=o.a.getToken();n?(e.text("Add to spotlight"),e.attr("title","Add this score to your spotlight"),e.attr("data-spotlight",0)):(e.text("Remove from spotlight"),e.attr("title","Remove this score from your spotlight"),e.attr("data-spotlight",1)),i.a.toggleSpotlight({isAddedToSpotlight:n,scoreId:s,csrfToken:a,success:function(){}})},e.onListSearch=function(t){var e=t.target.value.toLowerCase();r(".js-score-list-item").show(),e&&r(".js-score-list-item").each(function(){0>r(this).attr("data-name").toLowerCase().indexOf(e)&&r(this).hide()})},e.onRevisionClick=function(t){var e=this;t.preventDefault();var n=parseInt(r(t.target).attr("data-id"),10);this.spinner.show(),i.a.getRevisions({scoreId:n,success:function(t){var n=t.info;e.spinner.hide(),e.showModal(n.title,n.body)}})},e.onModalRemote=function(t){var e=this;t.preventDefault(),this.spinner.show();var n=r(t.target).attr("data-href");i.a.getModal({url:n,success:function(t){var n=t.info;e.spinner.hide(),e.showModal(n.title,n.body)}})},e.showModal=function(t,e){r(".js-score-modal-default-title").text(t),r(".js-score-modal-default-body").html(e),r(".js-score-modal-default").modal()},t}()},Ek63:function(t,e,n){"use strict";n.d(e,"s",function(){return o}),n.d(e,"r",function(){return i}),n.d(e,"L",function(){return s}),n.d(e,"X",function(){return r}),n.d(e,"q",function(){return a}),n.d(e,"M",function(){return c}),n.d(e,"R",function(){return d}),n.d(e,"V",function(){return u}),n.d(e,"O",function(){return l}),n.d(e,"J",function(){return f}),n.d(e,"N",function(){return h}),n.d(e,"Q",function(){return m}),n.d(e,"K",function(){return p}),n.d(e,"U",function(){return v}),n.d(e,"f",function(){return w}),n.d(e,"i",function(){return _}),n.d(e,"h",function(){return g}),n.d(e,"e",function(){return b}),n.d(e,"g",function(){return S}),n.d(e,"p",function(){return C}),n.d(e,"z",function(){return j}),n.d(e,"A",function(){return y}),n.d(e,"B",function(){return T}),n.d(e,"o",function(){return k}),n.d(e,"n",function(){return A}),n.d(e,"j",function(){return E}),n.d(e,"k",function(){return I}),n.d(e,"l",function(){return P}),n.d(e,"m",function(){return O}),n.d(e,"u",function(){return D}),n.d(e,"v",function(){return x}),n.d(e,"w",function(){return L}),n.d(e,"x",function(){return R}),n.d(e,"C",function(){return U}),n.d(e,"t",function(){return B}),n.d(e,"y",function(){return H}),n.d(e,"P",function(){return F}),n.d(e,"I",function(){return G}),n.d(e,"H",function(){return M}),n.d(e,"S",function(){return $}),n.d(e,"T",function(){return N}),n.d(e,"W",function(){return W}),n.d(e,"gb",function(){return V}),n.d(e,"db",function(){return q}),n.d(e,"ab",function(){return z}),n.d(e,"ib",function(){return K}),n.d(e,"cb",function(){return Y}),n.d(e,"Y",function(){return X}),n.d(e,"Z",function(){return J}),n.d(e,"hb",function(){return Q}),n.d(e,"bb",function(){return Z}),n.d(e,"eb",function(){return tt}),n.d(e,"fb",function(){return et}),n.d(e,"F",function(){return nt}),n.d(e,"G",function(){return ot}),n.d(e,"E",function(){return it}),n.d(e,"D",function(){return st}),n.d(e,"lb",function(){return rt}),n.d(e,"nb",function(){return at}),n.d(e,"mb",function(){return ct}),n.d(e,"b",function(){return dt}),n.d(e,"a",function(){return ut}),n.d(e,"d",function(){return lt}),n.d(e,"c",function(){return ft}),n.d(e,"kb",function(){return ht}),n.d(e,"jb",function(){return mt});var o="DASH_SUBSCR_SHOW",i="DASH_SUBSCR_FINISHED",s="/actions/download",r="/actions/upload/save",a="DASH_RECOM_SHOW",c="/actions/score/favorite/",d="/actions/score/preview/",u="/actions/score/show_download_modal/",l="/actions/user/follow/",f="/actions/hub/discussion/add_discussion",h="/actions/hub/filter_scores",m="/actions/hub/open_filter",p="/actions/dashboard/send_comment",v="/actions/score/hit_fake_mixer",w="BAREMETRICS_LOAD",_="BAREMETRICS_UPDATE_CARD_CLICK",g="BAREMETRICS_UPDATE_BILLING_CLICK",b="BAREMETRICS_CARD_UPDATE_COMPLETE",S="BAREMETRICS_MODAL_CLOSE",C="DASH_BOTD_SHOW",j="UPGRADE_ONBOARD_SLIDE_1",y="UPGRADE_ONBOARD_SLIDE_2",T="UPGRADE_ONBOARD_SLIDE_3",k="BOTTOM_SPLASH_SCORES_WEB",A="BOTTOM_SPLASH_SCORES_APP",E="BIG_SPLASH_SCORES_BOTTOM",I="BIG_SPLASH_SCORES_BOTTOM_SHOW",P="BIG_SPLASH_SCORES_TOP",O="BIG_SPLASH_SCORES_TOP_SHOW",D="OPEN_IN_APP_BOTTOM_CLICK",x="OPEN_IN_APP_BOTTOM_SHOW",L="OPEN_IN_APP_TOP_CLICK",R="OPEN_IN_APP_TOP_SHOW",U="why_am_i_seeing_it",B="HUB_IN_MENU_EXP_CLICK",H="SCORE_VIEW_NOT_HAS_PRO_ACCESS",F="/actions/notification/open",G="/actions/hub/hub/unsubscribe",M="/actions/hub/hub/subscribe",$="",N="",W="/actions/score/click_share_score",V="jmuse_hit_play",q="jmuse_hit_pause",z="jmuse_hit_fullscreen",K="jmuse_hit_transpose",Y="jmuse_hit_loop",X="jmuse_hit_audio_sources",J="jmuse_hit_font_resize",Q="jmuse_hit_playback_speed",Z="jmuse_hit_instruments",tt="jmuse_hit_piano_keyboard",et="jmuse_hit_piano_roll",nt="notification_show_empty",ot="notification_show_fill",it="notification_open_roll",st="notification_goto_date",rt="WEB_PUSH_SHOW_modal",at="WEB_PUSH_YES_modal",ct="WEB_PUSH_hit_YES_browser_modal",dt="2018_11_22_black_friday_sale_show",ut="2018_11_22_black_friday_sale_click",lt="2018_11_26_CYBER_MONDAY_SHOW",ft="2018_11_26_CYBER_MONDAY_CLICK",ht="2018_11_28_OPEN_IN_APP_SHOW",mt="2018_11_28_OPEN_IN_APP_CLICK"},"I/1j":function(t,e,n){"use strict";n.r(e);var o=n("HWCS"),i=n("BtPH"),s=n("cM9g"),r={init:function(t){var e=t.$container;this.$downloadButton=e.find(".js-score-download-button"),this.$downloadStatusButton=e.find(".js-score-download-status"),this.$downloadStatusText=e.find(".js-score-download-status-text"),this.addEventsListeners()},addEventsListeners:function(){var t=this;this.$downloadButton.on("click",function(e){t.processDownload(e.target.dataset.url)})},processDownload:function(t){var e=this;this.loaderStatusShow(),this.whenDownloadReady(t).then(this.startDownload.bind(this),function(t){o.a.error(t),s.a.error(t),e.loaderStatusHide()})},startDownload:function(t){this.loaderStatusHide(),this.redirectTo(t),this.setStatusMessage("")},redirectTo:function(t){document.location=t},whenDownloadReady:function(t){var e=this;return new Promise(function(n,o){var s=function(t){return i.a.get({url:t,payload:{json:!0}}).then(function(o){var i=o.url,r=o.process;i?n(i):(r&&e.setStatusMessage(r.message),setTimeout(function(){return s(t)},15e3))},o)};s(t)})},setStatusMessage:function(t){void 0===t&&(t=""),t?this.$downloadStatusText.removeClass("hidden"):this.$downloadStatusText.addClass("hidden"),this.$downloadStatusText.text(t)},loaderStatusShow:function(){this.$downloadStatusButton.attr("disabled",!0),this.$downloadStatusButton.find(".loader").removeClass("hidden")},loaderStatusHide:function(){this.$downloadStatusButton.attr("disabled",!1),this.$downloadStatusButton.find(".loader").addClass("hidden")}};e.default=r},OGwt:function(t,e,n){t.exports=n("s/lT")},WVCO:function(t,e,n){"use strict";n.r(e);var o=n("gnNu"),i=n("uXdi"),s=n("AQ33"),r=window.$,a=function(){function t(){}return t.prototype.init=function(){function t(t){function e(){return+document.querySelector(".js-part-input.checked").getAttribute("data-part-index")}var n,o=document.querySelector(".js-print-modal-open"),i=document.querySelector(".print-buttons"),s=document.querySelector(".js-print-preview img"),a=document.querySelector(".js-print-preview-locked"),c=r("#print-modal"),d=window.UGAPP.store.user.hasPrintAccess,u=window.UGAPP.store.score.id,l=window.UGAPP.store.user.id,f=!1,h=!1;o&&o.classList.remove("hidden"),c.one("focus.print",function(){var t=document.querySelector(".js-print-content"),e=t.offsetHeight;t.style.height=e+"px"}),c.on("focus.print",function(){l&&(-1!==e()||f||h||function(){if(!f&&!h){h=!0;var t=setInterval(function(){r.ajax("/score/print-parts/prepare?score_id="+u,{success:function(e){e=JSON.parse(e),f||"ok"!=e.result||1!=e.info.process.r||(f=!0,h=!1,clearInterval(t),r(document).trigger("printReady",[e.info.process.hash]))}})},1e3);i.classList.add("loading")}}(),h&&i&&i.classList.add("loading"))}),r(document).one("printReady",function(t,o){n=o,i.classList.remove("loading");e()});var m=document.querySelector(".viewerInner .page .image img");m&&(s.src=m.src);var p=document.querySelector(".js-print-part-list");p&&(p.insertAdjacentHTML("beforeEnd",'<div><span class="print-part-radio js-part-input checked" data-part-index="-1"></span> <span class="print-part-radio-label js-part-input-label" data-part-index="-1">Full score</span></div>'),t.forEach(function(t,e){p.insertAdjacentHTML("beforeEnd",'<div><span class="print-part-radio js-part-input" data-part-index="'+e+'"></span> <span class="print-part-radio-label js-part-input-label" data-part-index="'+e+'">'+t+"</span></div>")})),[".js-part-input",".js-part-input-label"].forEach(function(t){[].slice.call(document.querySelectorAll(t),0).forEach(function(t){t.addEventListener("click",function(t){var e=document.querySelector(".js-part-input.checked"),n=t.target.getAttribute("data-part-index");e.getAttribute("data-part-index")===n||(e.classList.remove("checked"),document.querySelector('.js-part-input[data-part-index="'+n+'"]').classList.add("checked"),function(t){-1==t||d?(s&&s.classList.remove("hidden"),a&&a.classList.add("hidden")):(s&&s.classList.add("hidden"),a&&a.classList.remove("hidden"))}(n))})})});var v=document.querySelector(".js-download-pdf");v&&v.addEventListener("click",function(){var o="scorefull",i=e();if(-1!==i&&(o=t[i]),l||-1!==i)if(d||-1===i){var s=window.btoa([l,u,n,o,"download"].join("||"));(d||-1===i)&&window.open("/score/print-parts/pdf?data="+s,"_blank")}else window.location.href="/upgrade?feature=parts6";else window.location.href="/user/login?destination="+encodeURIComponent(window.location.pathname)});var w=document.querySelector(".js-print");w&&w.addEventListener("click",function(){var o="scorefull",i=e();if(-1!==i&&(o=t[i]),l||-1!==i)if(d||-1===i){var s=window.btoa([l,u,n,o,"print"].join("||"));(d||-1===i)&&window.open("/score/print-parts/pdf?data="+s,"_blank")}else window.location.href="/upgrade?feature=parts7";else window.location.href="/user/login?destination="+encodeURIComponent(window.location.pathname)})}function e(){window.UGAPP.store.score&&window.UGAPP.store.score.partNames&&window.UGAPP.store.user.hasPrintAccess?t(window.UGAPP.store.score.partNames):!window.UGAPP.store.user.hasPrintAccess&&window.UGAPP.store.score&&window.UGAPP.store.score.partNames&&1!==window.UGAPP.store.score.partNames.length&&t(window.UGAPP.store.score.partNames)}-1===["interactive","complete"].indexOf(document.readyState)?document.addEventListener("readystatechange",function(){"interactive"===document.readyState&&e()}):e()},t}(),c=n("OGwt"),d=n.n(c),u=n("tDDK"),l=n("Zorm"),f=n("Ek63"),h=window,m=h.$,p=h.location,v={init:function(){this.events={score_play:"play"},this.currentScoreId=window.UGAPP.store.score.id,this.addEventListeners(),this.scoreList=new s.a,this.scoreList.init(),this.scorePrint=new a,this.scorePrint.init(),i.a.trackView()},addEventListeners:function(){var t,e,n,o,i=this;m(document).on("click",".js-score-download-status",this.onDownloadToggle.bind(this)).on("click",".js-score-btn-favorite-toggle",this.onFavoriteToggle.bind(this)).on("click",".js-score-btn-favorite-view",this.onFavoriteView.bind(this)).on("click",".js-score-user-after-download-modal-send-gift",this.onUserAfterDownloadSendGiftClick.bind(this)).on("click",".js-score-user-after-download-modal-follow",this.onUserAfterDownloadFollowClick.bind(this)).on("click",".js-score-user-follow-btn",this.onUserFollowClick.bind(this)),m(window).one("jMuse.play",function(){i.trackEvent(i.currentScoreId,i.events.score_play)}),t=[20],e=function(t){return Object(u.c)(l.a,{seconds:t,id:i.currentScoreId})},o=0,n=Array.isArray(t)?t:[t],d.a.every(1e3,function(){o++,n.includes(o)&&e(o)})},onFavoriteToggle:function(t){if(t.preventDefault(),window.UGAPP.store.user.id){var e=window.UGAPP.store.score.isAddedToFavorite,n=this.currentScoreId,s=o.a.getToken();i.a.toggleFavorites({isAddedToFavorite:e,scoreId:n,csrfToken:s,success:function(){}}),window.UGAPP.store.score.isAddedToFavorite=!window.UGAPP.store.score.isAddedToFavorite,m(".js-score-btn-favorite-text").text(window.UGAPP.store.score.isAddedToFavorite?"Unfavorite":"Favorite")}else window.location.href="/user/login?destination=/"+p.pathname.substring(1)},onFavoriteView:function(){var t=this,e=this.currentScoreId;i.a.getFavoriteUsersForScore({scoreId:e,success:function(e){var n=e.html;t.showModal("People who favorited this score",n)}})},onDownloadToggle:function(){Object(u.e)(f.V)},onUserAfterDownloadSendGiftClick:function(){Object(u.e)(f.T)},onUserAfterDownloadFollowClick:function(){Object(u.e)(f.S)},onUserFollowClick:function(t){t.preventDefault();var e=m(t.target),n=e.attr("data-user"),s=o.a.getToken();e.hasClass("action-flag")?(e.removeClass("action-flag").addClass("action-unflag").text("Unfollow"),i.a.followUser({userId:n,csrfToken:s})):(e.removeClass("action-unflag").addClass("action-flag").text("Follow"),i.a.unfollowUser({userId:n,csrfToken:s}))},showModal:function(t,e){m(".js-score-modal-default-title").text(t),m(".js-score-modal-default-body").html(e),m(".js-score-modal-default").modal()},trackEvent:function(t,e){i.a.trackScore({scoreId:t,eventName:e})}};m(function(){v.init()})},biSZ:function(t,e,n){!function(e){"use strict";var n=-1,o={onVisible:function(t){var e=o.isSupported();if(!e||!o.hidden())return t(),e;var n=o.change(function(){o.hidden()||(o.unbind(n),t())});return n},change:function(t){if(!o.isSupported())return!1;var e=n+=1;return o._callbacks[e]=t,o._listen(),e},unbind:function(t){delete o._callbacks[t]},afterPrerendering:function(t){var e=o.isSupported();if(!e||"prerender"!=o.state())return t(),e;var n=o.change(function(e,i){"prerender"!=i&&(o.unbind(n),t())});return n},hidden:function(){return!(!o._doc.hidden&&!o._doc.webkitHidden)},state:function(){return o._doc.visibilityState||o._doc.webkitVisibilityState||"visible"},isSupported:function(){return!(!o._doc.visibilityState&&!o._doc.webkitVisibilityState)},_doc:document||{},_callbacks:{},_change:function(t){var e=o.state();for(var n in o._callbacks)o._callbacks[n].call(o._doc,t,e)},_listen:function(){if(!o._init){var t="visibilitychange";o._doc.webkitVisibilityState&&(t="webkit"+t);var e=function(){o._change.apply(o,arguments)};o._doc.addEventListener?o._doc.addEventListener(t,e):o._doc.attachEvent(t,e),o._init=!0}}};t.exports?t.exports=o:e.Visibility=o}(this)},"s/lT":function(t,e,n){!function(e){"use strict";var o=-1,i=function(t){return t.every=function(e,n,i){t._time(),i||(i=n,n=null);var s=o+=1;return t._timers[s]={visible:e,hidden:n,callback:i},t._run(s,!1),t.isSupported()&&t._listen(),s},t.stop=function(e){return!!t._timers[e]&&(t._stop(e),delete t._timers[e],!0)},t._timers={},t._time=function(){t._timed||(t._timed=!0,t._wasHidden=t.hidden(),t.change(function(){t._stopRun(),t._wasHidden=t.hidden()}))},t._run=function(n,o){var i,s=t._timers[n];if(t.hidden()){if(null===s.hidden)return;i=s.hidden}else i=s.visible;var r=function(){s.last=new Date,s.callback.call(e)};if(o){var a=new Date-s.last;i>a?s.delay=setTimeout(function(){s.id=setInterval(r,i),r()},i-a):(s.id=setInterval(r,i),r())}else s.id=setInterval(r,i)},t._stop=function(e){var n=t._timers[e];clearInterval(n.id),clearTimeout(n.delay),delete n.id,delete n.delay},t._stopRun=function(){var e=t.hidden(),n=t._wasHidden;if(e&&!n||!e&&n)for(var o in t._timers)t._stop(o),t._run(o,!e)},t};t.exports?t.exports=i(n("biSZ")):i(e.Visibility)}(window)},uXdi:function(t,e,n){"use strict";var o=n("gnNu"),i=n("tDDK"),s=n("Ek63"),r=window.UGAPP.store.user.hasProAccess,a=window.$;e.a={trackView:function(){r||Object(i.d)(s.y)},createComment:function(t){var e=t.discussionId,n=t.parentId,i=t.body,s=t.success;a.post("/score/comment/add",{score_id:e,"ScoreComment[score_id]":e,"ScoreComment[parent_id]":n,"ScoreComment[body]":i,_csrf:o.a.getToken()},function(t){var e;t.status&&(e=t.comment),s({html:e})})},getFavoriteUsersForScore:function(t){var e=t.scoreId,n=t.success;a.ajax({type:"GET",url:"/score/collections/favorite/view",data:{id:e},dataType:"json",success:function(t){var e=t.info;n({html:e})}})},toggleGroups:function(t){var e=t.isAddedToList,n=t.scoreId,o=t.listId,i=t.csrfToken,s=t.success,r=e?"/score/collections/group/remove":"/score/collections/group/add";a.ajax({type:"GET",url:r,data:{score_id:n,group_id:o,_csrf:i},dataType:"json",success:function(t){var e=t.info;s({html:e})}})},toggleSets:function(t){var e=t.isAddedToList,n=t.scoreId,o=t.listId,i=t.csrfToken,s=t.success,r=e?"/score/collections/set/remove":"/score/collections/set/add";a.ajax({type:"GET",url:r,data:{score_id:n,id:o,_csrf:i},dataType:"json",success:function(t){s({res:t})}})},toggleFavorites:function(t){var e=t.isAddedToFavorite,n=t.scoreId,o=t.csrfToken,i=t.success,s=e?"/score/collections/favorite/remove":"/score/collections/favorite/add";a.ajax({type:"POST",url:s,data:{id:n,_csrf:o},dataType:"json",success:function(t){var e=t.info;i({html:e})}})},toggleSpotlight:function(t){var e=t.isAddedToSpotlight,n=t.scoreId,o=t.csrfToken,i=t.success,s=e?"/score/collections/spotlight/remove":"/score/collections/spotlight/add";a.ajax({type:"POST",url:s,data:{id:n,_csrf:o},dataType:"json",success:function(t){var e=t.info;i({html:e})}})},togglePrivacy:function(t){var e=t.scoreIds,n=t.privated,o=t.csrfToken,i=t.success;a.ajax({type:"POST",url:"/score/manage/privacy/toggle",data:{score_ids:e,private:n,_csrf:o},dataType:"json",success:function(t){var e=t.info;i({html:e})}})},trackScore:function(t){var e=t.scoreId,n=t.eventName;t.success;a.get("/components/stat/track-score",{score_id:e,event:n})},getModal:function(t){var e=t.url,n=t.success;a.ajax({type:"GET",url:e,dataType:"json",success:function(t){var e=t.info;n({info:e})}})},getRevisions:function(t){var e=t.scoreId,n=t.success;a.ajax({type:"GET",url:"/score/info/revisions",data:{score_id:e},dataType:"json",success:function(t){var e=t.info;n({info:e})}})},followUser:function(t){var e=t.userId,n=t.csrfToken;t.success;a.post("/score/follow-user/add",{id:e,_csrf:n})},unfollowUser:function(t){var e=t.userId,n=t.csrfToken;t.success;a.post("/score/follow-user/remove",{id:e,_csrf:n})},getListModal:function(t){var e=t.scoreIds,n=t.listType,o=t.actionType,i=t.csrfToken,s=t.success;a.ajax({type:"POST",url:"/score/collections/"+n+"/get-list-modal",data:{score_ids:e,action_type:o,_csrf:i},dataType:"json",success:function(t){var e=t.info;s({info:e})}})},scoreDeleteMuti:function(t){var e=t.scoreIds,n=t.csrfToken,o=t.success;a.ajax({type:"POST",url:"/score/manage/delete/multi-delete",data:{ids:e,_csrf:n},dataType:"json",success:function(t){var e=t.info;o({info:e})}})}}},wecF:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var o=window.$,i=function(){function t(){}var e=t.prototype;return e.show=function(){o("body").append('<div class="ajax-progress-throbber"><div class="throbber"></div></div>')},e.hide=function(){o(".ajax-progress-throbber").remove()},t}()},xczq:function(t,e,n){"use strict";n.r(e);var o=n("ducO"),i={init:function(t){var e=t.$container,n=t.score,o=t.user;this.$container=e,this.statUrl=n.statUrl,this.user=o,this.trackView(n)},isScoreAlreadyViewed:function(t){var e=this.findScoreByID(t.id),n=!1;if(e&&e.length){e[0];var o=e[1];n=9e5>=Date.now()-o}return n},trackView:function(t){this.isScoreAlreadyViewed(t)||((!t.user||!this.user.id||t.user.id!==this.user.id)&&this.sendStats(this.statUrl),this.markScoreAsViewed(t.id))},findScoreByID:function(t){return(o.a.get("scores_v")||[]).find(function(e){return e[0]===t})},byLessThan15Min:function(t){t[0];var e=t[1];return Date.now()-e<9e5},markScoreAsViewed:function(t){var e=o.a.get("scores_v")||[],n=e.findIndex(function(e){return e[0]===t});0<=n?e[n]=[t,Date.now()]:e.unshift([t,Date.now()]),o.a.set("scores_v",e.splice(0,100))},sendStats:function(t){(new window.Image).src=t}};e.default=i}}]);
//# sourceMappingURL=/static/public/build/musescore/../../sourcemap/musescore/20_18_44_201812/score.3afeb711ff6008799be6a414f312e78753816.js.map